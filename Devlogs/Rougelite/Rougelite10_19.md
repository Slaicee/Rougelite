# 今日进展

- 探究了游戏开发流程大纲

---

## 🚀 游戏核心概念（确认）

|项目|内容|
|---|---|
|**类型**|俯视视角、3D 模型、2D 操作的 Roguelite 射击/采集类|
|**核心循环**|收集矿石 → 商店升级 → 抵御怪物 → Boss战 → 结算|
|**失败条件**|玩家死亡（重开）|
|**胜利条件**|击败Boss|
|**评分机制**|存活时间 / 剩余矿石量|
|**经济系统**|矿石为货币，可兑换技能/属性/装备|
|**节奏**|一局约 5~10 分钟，逐波增强敌人|

---
## ⚙️ 一、更新后的核心循环逻辑（自由商店版）

### 🔁 游戏循环图（最终）

`[开始游戏]      ↓ [收集矿石 & 打怪] ←────┐      ↓                   │ [进入商店 → 升级] ───────┘  （随时可进入）      ↓ [时间到 → 生成Boss]      ↓  ┌────────────┐  │ Boss被击败 │──→ [结算 → 胜利]  └──────┬──────┘         ↓      [玩家死亡 → 失败]`

### 🎯 核心玩法目标

- 玩家在 **倒计时结束前** 尽可能采集矿石并增强自己；
    
- 战斗中可 **随时打开商店界面**（比如按 `Tab` 或 `B` 键）；
    
- 商店界面 **不会暂停时间**，怪物仍然会逼近（有风险！）；
    
- 当计时结束，Boss出现；
    
- 击败Boss后结算。
    

---

## 🧩 二、系统结构（基于新循环）

### 1️⃣ 玩家系统（Player）

包含：

- **移动控制**：平面移动（XZ）
    
- **采矿系统**：靠近矿石按键采集 / 自动采集
    
- **攻击系统**：手动射击或自动攻击
    
- **属性系统**：HP、攻速、攻击力、防御、移速
    
- **经验与升级接口**：供商店调用
    

### 2️⃣ 矿石系统（Ore）

- 地图分布矿点（固定位置生成）
    
- 怪物死亡掉落矿石（掉落物Prefab）
    
- 玩家拾取后计入货币系统
    
- HUD显示当前矿石数量
    

### 3️⃣ 敌人系统（Enemy）

- 追踪AI + 攻击
    
- 波次递进式难度（速度、数量、血量）
    
- 死亡掉落矿石
    
- Boss为特殊类型敌人（多阶段攻击）
    

### 4️⃣ 商店系统（Shop）

- 可在任何时刻按键打开
    
- 打开后出现升级界面（UI浮层）
    
- 显示购买项列表：
    
    - 属性强化（+攻击、+血量、+防御）
        
    - 主动技能（如AOE冲击波）
        
    - 武器升级（子弹速度、射程）
        
- 每次购买消耗矿石（玩家矿石同步更新）
    
- 商店不暂停游戏（战斗继续）
    

### 5️⃣ 波次系统 / 时间系统（WaveManager）

- 全局计时器（如每局180秒）
    
- 不再有波次间暂停
    
- 敌人生成速率与时间挂钩（越后越难）
    
- 倒计时结束 → 生成Boss
    

### 6️⃣ Boss系统

- 独立生成（替换普通敌人刷怪）
    
- HP条固定在屏幕上方
    
- Boss死亡后进入结算界面
    

### 7️⃣ UI系统

- 血条、矿石数量、时间倒计时
    
- 商店界面（可随时打开）
    
- Boss HP 条
    
- 结算界面（显示剩余矿石/时间）
    

### 8️⃣ 游戏管理系统（GameManager）

负责：

- 游戏状态（Playing / Boss / Win / Lose）
    
- 控制UI显示
    
- 管理玩家属性全局更新
    
- 控制暂停/重新开始/结算逻辑
    

---

## 🎮 三、交互与流程设计

### ⌨️ 玩家控制键位建议

|功能|默认键位|
|---|---|
|移动|WASD|
|攻击（或自动攻击）|左键/自动触发|
|采矿|E|
|打开商店|B|
|暂停游戏|ESC|

### 📜 商店交互流程

`按 B 键 → 打开商店UI ↓ 查看升级项（动态刷新内容） ↓ 点击购买（扣除矿石 → 即时更新属性） ↓ 关闭商店继续战斗`

> ⚠️ 若你想保留挑战感，可以设置商店打开时游戏不暂停（敌人仍能攻击）。

---

## 🧱 四、场景与层级建议（更新）

`GameScene ├── Environment（地面 + 矿石生成点） ├── Player（含相机） ├── EnemySpawner（控制刷怪） ├── OreSpawner（控制矿石点刷新） ├── ShopCanvas（随时可激活） ├── UIManager（血量/计时/货币UI） └── GameManager（全局状态控制）`

---

## 🕹️ 五、开发顺序建议（对应新循环）

|阶段|内容|目标|
|---|---|---|
|1️⃣|玩家移动、攻击、采集系统|能打怪、采矿|
|2️⃣|敌人AI与掉落矿石|怪物循环生成|
|3️⃣|矿石货币系统 + UI同步|拾取矿石有反馈|
|4️⃣|商店系统 + 升级逻辑|可随时打开购买升级|
|5️⃣|波次计时系统|时间推进、难度增加|
|6️⃣|Boss生成与结算|一局完整闭环|
|7️⃣|打磨数值、加音效|完整Demo体验|

---

## 💡 六、额外建议（可选但亮眼）

|功能|效果|
|---|---|
|🔋 **采矿机制可升级**|“矿镐等级提升 → 提高采集速度”|
|💥 **主动技能冷却系统**|例如“能量爆发”清屏技能|
|💰 **商店动态刷新物品**|每隔30秒或购买后刷新|
|🧱 **基地区域**|玩家可回到安全区购买升级（引导新手）|
|🌌 **昼夜变化/天气**|外星气氛增强，视觉层次丰富|

---

## 🏁 七、项目完成后的验收标准（Demo完成标志）

|项目|是否完成|
|---|---|
|玩家移动、攻击、采矿|✅|
|敌人生成、掉落矿石|✅|
|商店可随时打开、可购买|✅|
|倒计时后生成Boss并能战斗|✅|
|Boss击败 → 结算界面|✅|
|死亡 → 重新开始|✅|
|矿石数作为最终评分|✅|

> 当以上七项全部实现，你的 Demo 已经是一个**完整可游玩的Roguelite原型**了。
    

---
